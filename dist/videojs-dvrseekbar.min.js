/*! @name videojs-dvrseekbar @version 0.2.6 @license Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsDvrseekbar=t(e.videojs)}(this,function(e){"use strict";var t={startTime:0},n=function(n){var r=this,a=e.getComponent("SeekBar");a.prototype.dvrTotalTime=function(e){var t=e.seekable();return t&&t.length?t.end(0)-t.start(0):0},a.prototype.handleMouseMove=function(e){var t=void 0,n=void 0;if((t=n=this.player_.seekable())&&t.length){for(n=t.start(0)+this.calculateDistance(e)*this.dvrTotalTime(this.player_);n>=t.end(0);)n-=.1;this.player_.currentTime(n)}},a.prototype.updateAriaAttributes=function(){var t=void 0,n=void 0,r=this.player_.seekable();r&&r.length&&(t=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime(),n=0>(n=r.end(0)-t)?0:n,this.el_.setAttribute("aria-valuenow",Math.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",(0===t?"":"-")+e.formatTime(n,r.end(0))))},n||(n=t),this.on("timeupdate",function(e){var t,n,a;n=(t=r).seekable(),a=document.getElementById("liveButton"),n&&n.length&&(n.end(0)-t.currentTime()<30?a.className="vjs-live-label onair":a.className="vjs-live-label",t.duration(t.seekable().end(0)))}),this.on("play",function(e){}),this.on("pause",function(e){document.getElementById("liveButton").className="vjs-live-label"}),this.ready(function(){!function(t,n){t.addClass("vjs-dvrseekbar"),t.controlBar.addClass("vjs-dvrseekbar-control-bar"),t.controlBar.progressControl&&t.controlBar.progressControl.addClass("vjs-dvrseekbar-progress-control");var r=document.createElement("div"),a=document.createElement("button");r.className="vjs-live-button vjs-control",a.innerHTML=document.getElementsByClassName("vjs-live-display")[0].innerHTML,a.id="liveButton",t.paused()||(a.className="vjs-live-label onair");var s=function(e){t.currentTime(t.seekable().end(0)),t.play()};a.addEventListener?a.addEventListener("click",s,!1):a.attachEvent&&a.attachEvent("onclick",function(){return s.apply(a,[window.event])}),r.appendChild(a);var o=document.getElementsByClassName("vjs-control-bar")[0],i=document.getElementsByClassName("vjs-progress-control")[0];o.insertBefore(r,i),e.log("dvrSeekbar Plugin ENABLED!",n)}(r,e.mergeOptions(t,n))})};return(e=e&&e.hasOwnProperty("default")?e.default:e).plugin("dvrseekbar",n),n.VERSION="__VERSION__",n});
